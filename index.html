<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter OAuth Callback</title>
</head>
<body>
    <h1>Twitter OAuth Callback</h1>
    <p>Processing your request...</p>
    <script>
        // Function to extract query parameters from the URL
        function getQueryParams() {
            const params = {};
            window.location.search
                .substring(1)
                .split("&")
                .forEach(function(part) {
                    const pair = part.split("=");
                    params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
                });
            return params;
        }

        // Get the authorization code from the URL parameters
        const params = getQueryParams();
        if (params['code']) {
            console.log('Authorization code:', params['code']);
            // Display the authorization code on the page
            document.body.innerHTML += `<p>Authorization code received: ${params['code']}</p>`;
            
            // TODO: You can add code here to send the authorization code to your Make webhook
            // Example:
            // fetch('https://your-make-webhook-url', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ code: params['code'] })
            // }).then(response => {
            //     console.log('Code sent to Make:', response);
            // });
        } else {
            console.log('No authorization code found');
            document.body.innerHTML += `<p>No authorization code found. Please try again.</p>`;
        }
    </script>
</body>
</html>

